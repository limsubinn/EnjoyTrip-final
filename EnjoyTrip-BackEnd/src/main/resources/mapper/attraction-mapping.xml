<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ssafy.enjoytrip.model.dao.AttractionDao">
	
	<resultMap type="sido" id="sidoResult">
        <result column="sido_code" property="sidoCode"/>
        <result column="sido_name" property="sidoName"/>
    </resultMap>
    
    <resultMap type="gugun" id="gugunResult">
        <result column="gugun_code" property="gugunCode"/>
        <result column="gugun_name" property="gugunName"/>
        <result column="sido_code" property="sidoCode"/>
    </resultMap>
    
    <resultMap type="contentType" id="contentTypeResult">
        <result column="content_type_id" property="contentTypeId"/>
        <result column="content_type_name" property="contentTypeName"/>
    </resultMap>
    
    <resultMap type="attractionInfo" id="attractionInfoResult">
        <result column="content_id" property="contentId"/>
        <result column="content_type_id" property="contentTypeId"/>
        <result column="title" property="title"/>
        <result column="addr1" property="addr1"/>
        <result column="addr2" property="addr2"/>
        <result column="zipcode" property="zipcode"/>
		<result column="tel" property="tel"/>
		<result column="first_image" property="firstImage"/>
		<result column="first_image2" property="firstImage2"/>
        <result column="readcount" property="readcount"/>
        <result column="sido_code" property="sidoCode"/>
        <result column="gugun_code" property="gugunCode"/>
        <result column="latitude" property="latitude"/>
        <result column="longitude" property="longitude"/>
        <result column="mlevel" property="mlevel"/>
    </resultMap>
    
    <resultMap type="attractionDescription" id="attractionDescriptionResult">
        <result column="content_id" property="contentId"/>
        <result column="homepage" property="homepage"/>
        <result column="overview" property="overview"/>
        <result column="telname" property="telname"/>
    </resultMap>
    
    <!-- 시도 리스트  -->
	<select id="listSido" resultMap="sidoResult">
		<![CDATA[
			select * from sido
		]]>
	</select>
	
	<!-- 시도  -->
	<select id="selectBySidoCode" resultMap="sidoResult" parameterType="int">
		<![CDATA[
			 select * 
			 from sido
			 where sido_code = #{sidoCode}
		]]>
	</select>
	
	<!-- 구군 리스트  -->
	<select id="listGugun" parameterType="int" resultMap="gugunResult">
		<![CDATA[
			select *
			from gugun
			where sido_code = #{sidoCode}
		]]>
	</select>
	
	<!-- 구군  -->
	<select id="selectByGugunCode" resultMap="gugunResult" parameterType="int">
		<![CDATA[
			 select * 
			 from gugun
			 where sido_code = #{sidoCode} and gugun_code = #{gugunCode}
		]]>
	</select>
	
	<!-- 관광지 유형 리스트  -->
	<select id="listContentType" resultMap="contentTypeResult">
		<![CDATA[
			select * from content_type
		]]>
	</select>
	
	<!-- 관광지 유형  -->
	<select id="selectByContentTypeId" resultMap="contentTypeResult" parameterType="int">
		<![CDATA[
			 select * 
			 from content_type
			 where content_type_id = #{contentTypeId}
		]]>
	</select>
	
	<!-- 전체 검색  -->
	<select id="listAttractionInfo" resultMap="attractionInfoResult">
		<![CDATA[
			SELECT * 
			FROM attraction_info 
		]]>
	</select>
	
	<!-- 시도 코드로 검색  -->
	<select id="listAttractionInfoBySido" resultMap="attractionInfoResult" parameterType="int">
		<![CDATA[
			SELECT * 
			FROM attraction_info 
			WHERE sido_code=#{sidoCode}
		]]>
	</select>
	
	<!-- 시도 코드 + 구군 코드로 검색  -->
	<select id="listAttractionInfoByGugun" resultMap="attractionInfoResult" parameterType="int">
		<![CDATA[
			SELECT * 
			FROM attraction_info 
			WHERE sido_code=#{sidoCode} and gugun_code=#{gugunCode}
		]]>
	</select>
	
	<!-- 관광지 유형으로 검색  -->
	<select id="listAttractionInfoByContentType" resultMap="attractionInfoResult" parameterType="int">
		<![CDATA[
			SELECT * 
			FROM attraction_info 
			WHERE content_type_id=#{contentTypeId}
		]]>
	</select>
	
	<!-- 시도 + 관광지 유형으로 검색  -->
	<select id="listAttractionInfoBySidoAndContentType" resultMap="attractionInfoResult" parameterType="int">
		<![CDATA[
			SELECT * 
			FROM attraction_info 
			WHERE sido_code=#{sidoCode} and content_type_id=#{contentTypeId}
		]]>
	</select>
	
	<!-- 시도 + 구군 + 관광지 유형으로 검색  -->
	<select id="listAttractionInfoByGugunAndContentType" resultMap="attractionInfoResult" parameterType="int">
		<![CDATA[
			SELECT * 
			FROM attraction_info 
			WHERE sido_code=#{sidoCode} and gugun_code=#{gugunCode} and content_type_id=#{contentTypeId}
		]]>
	</select>
	
	<!-- 관광지 정보 -->
	<select id="attractionInfo" resultMap="attractionInfoResult" parameterType="int">
		<![CDATA[
			SELECT * FROM attraction_info where content_id=#{contentId}
		]]>
	</select>
	
	<!-- 관광지 설명  -->
	<select id="attractionDescription" resultMap="attractionDescriptionResult" parameterType="int">
		<![CDATA[
			SELECT * FROM attraction_description where content_id=#{contentId}
		]]>
	</select>
</mapper>